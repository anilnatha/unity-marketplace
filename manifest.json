[
  {
    "Name": "sample application",
    "Version": "0.1-beta",
    "Channel": "beta",
    "Owner": "Tom Barber",
    "Description": "A demonstration application for the Unity platform",
    "Repository": "https://github.com/unity-sds/unity-marketplace",
    "Tags": [
      "tag a",
      "tag b"
    ],
    "Category": "data processing",
    "IamRoles": {
      "Statement": [
        {
          "Effect": "Allow",
          "Action": [
            "iam:CreateInstanceProfile"
          ],
          "Resource": [
            "arn:aws:iam::<account_id>:instance-profile/eksctl*"
          ]
        }
      ]
    },
    "Package": "http://github.com/path/to/package.zip",
    "ManagedDependencies": [
      {
        "Eks": {
          "MinimumVersion": "1.21"
        }
      }
    ],
    "Backend": "terraform",
    "DefaultDeployment": {
      "Variables": {
        "some_terraform_variable": "some_value"
      },
      "EksSpec": {
        "NodeGroups": [
          {
            "NodeGroup1": {
              "MinNodes": 1,
              "MaxNodes": 10,
              "DesiredNodes": 4,
              "InstanceType": "m6.large"
            }
          }
        ]
      }
    }
  },
  {
    "DisplayName": "Unity API Gateway",
    "Name": "unity-apigateway",
    "Version": "0.1-beta",
    "Channel": "beta",
    "Owner": "U-CS Team",
    "Description": "A package to install and configure an API gateway for your Unity Venue",
    "Repository": "https://github.com/unity-sds/unity-cs-infra/",
    "Tags": [
      "api",
      "http",
      "rest"
    ],
    "Category": "system",
    "IamRoles": {
      "Statement": [
        {
          "Effect": "Allow",
          "Action": [
            "iam:CreateInstanceProfile"
          ],
          "Resource": [
            "arn:aws:iam::<account_id>:instance-profile/eksctl*"
          ]
        }
      ]
    },
    "Package": "https://github.com/unity-sds/unity-cs-infra/",
    "Backend": "terraform",
    "WorkDirectory": "terraform-project-api-gateway_module",
    "DefaultDeployment": {
      "Variables": {
        "some_terraform_variable": "some_value"
      }
    }
  },
  {
    "DisplayName": "Unity Kubernetes",
    "Name": "unity-eks",
    "Version": "0.1",
    "Channel": "beta",
    "Owner": "Tom Barber",
    "Description": "The Unity Kubernetes package",
    "Repository": "https://github.com/unity-sds/unity-cs-infra",
    "Tags": [
      "eks",
      "kubernetes"
    ],
    "Category": "system",
    "IamRoles": {
      "Statement": [
        {
          "Effect": "Allow",
          "Action": [
            "iam:CreateInstanceProfile"
          ],
          "Resource": [
            "arn:aws:iam::<account_id>:instance-profile/eksctl*"
          ]
        }
      ]
    },
    "Package": "https://github.com/unity-sds/unity-cs-infra",
    "WorkDirectory": "terraform-unity-eks_module",
    "Backend": "terraform",
    "ManagedDependencies": [
      {
        "Eks": {
          "MinimumVersion": "1.21"
        }
      }
    ],
    "DefaultDeployment": {
      "Variables": {
        "Values": {
          "some_terraform_variable": "some_value"
        },
        "NestedValues": {
          "NodeGroups": {
            "Config": {
              "Name": {
                "Options": {
                  "type": "String",
                  "default": "NodeGroup"
                }
              },
              "MinNodes": {
                "Options": {
                  "type": "Number",
                  "default": "1"
                }
              },
              "MaxNodes": {
                "Options": {
                  "type": "Number",
                  "default": "3"
                }
              },
              "DesiredNodes": {
                "Options": {
                  "type": "Number",
                  "default": "1"
                }
              },
              "InstanceType": {
                "Options": {
                  "type": "String",
                  "default": "m6.xlarge"
                }
              }
            }
          }
        }
      }
    }
  },
  {
    "Name": "Unity SPS",
    "Version": "0.1-beta",
    "Channel": "beta",
    "Owner": "Tom Barber",
    "Description": "The Unity SPS Prototype package",
    "Repository": "https://github.com/unity-sds/unity-sps-prototype",
    "Tags": [
      "sps",
      "data processing"
    ],
    "Category": "data processing",
    "IamRoles": {
      "Statement": [
        {
          "Effect": "Allow",
          "Action": [
            "iam:CreateInstanceProfile"
          ],
          "Resource": [
            "arn:aws:iam::<account_id>:instance-profile/eksctl*"
          ]
        }
      ]
    },
    "Package": "https://github.com/unity-sds/unity-sps-prototype/archive/refs/tags/u-cs-deployment.zip",
    "ManagedDependencies": [
      {
        "Eks": {
          "MinimumVersion": "1.21"
        }
      }
    ],
    "Backend": "terraform",
    "DefaultDeployment": {
      "Variables": {
        "Values": {
          "celeryconfig_filename": "celeryconfig_remote.py",
          "counter": "",
          "datasets_filename": "datasets.remote.template.json",
          "deployment_environment": "mcp",
          "kubeconfig_filepath": "",
          "namespace": "",
          "service_type": "LoadBalancer",
          "venue": ""
        },
        "NestedValues": {
          "docker_images": {
            "Config": {
              "ades_wpst_api": {
                "Options": {
                  "type": "String",
                  "default": "ghcr.io/unity-sds/unity-sps-prototype/ades-wpst-api:unity-v0.0.1"
                }
              },
              "busybox": {
                "Options": {
                  "type": "String",
                  "default": "k8s.gcr.io/busybox"
                }
              },
              "hysds_core": {
                "Options": {
                  "type": "String",
                  "default": "ghcr.io/unity-sds/unity-sps-prototype/hysds-core:unity-v0.0.1"
                }
              },
              "hysds_factotum": {
                "Options": {
                  "type": "String",
                  "default": "ghcr.io/unity-sds/unity-sps-prototype/hysds-factotum:unity-v0.0.1"
                }
              },
              "hysds_grq2": {
                "Options": {
                  "type": "String",
                  "default": "ghcr.io/unity-sds/unity-sps-prototype/hysds-grq2:unity-v0.0.1"
                }
              },
              "hysds_mozart": {
                "Options": {
                  "type": "String",
                  "default": "ghcr.io/unity-sds/unity-sps-prototype/hysds-mozart:unity-v0.0.1"
                }
              },
              "hysds_ui": {
                "Options": {
                  "type": "String",
                  "default": "ghcr.io/unity-sds/unity-sps-prototype/hysds-ui-remote:unity-v0.0.1"
                }
              },
              "hysds_verdi": {
                "Options": {
                  "type": "String",
                  "default": "ghcr.io/unity-sds/unity-sps-prototype/hysds-verdi:unity-v0.0.1"
                }
              },
              "logstash": {
                "Options": {
                  "type": "String",
                  "default": "docker.elastic.co/logstash/logstash:7.10.2"
                }
              },
              "mc": {
                "Options": {
                  "type": "String",
                  "default": "minio/mc:RELEASE.2022-03-13T22-34-00Z"
                }
              },
              "minio": {
                "Options": {
                  "type": "String",
                  "default": "minio/minio:RELEASE.2022-03-17T06-34-49Z"
                }
              },
              "rabbitmq": {
                "Options": {
                  "type": "String",
                  "default": "rabbitmq:3-management"
                }
              },
              "redis": {
                "Options": {
                  "type": "String",
                  "default": "redis:latest"
                }
              }
            }
          },
          "node_port_map": {
            "Config": {
              "ades_wpst_api_service": {
                "Options": {
                  "default": "30011",
                  "type": "Number"
                }
              },
              "grq2_es": {
                "Options": {
                  "default": "30012",
                  "type": "Number"
                }
              },
              "grq2_service": {
                "Options": {
                  "default": "30002",
                  "type": "Number"
                }
              },
              "hysds_ui_service": {
                "Options": {
                  "default": "30009",
                  "type": "Number"
                }
              },
              "minio_service_api": {
                "Options": {
                  "default": "30007",
                  "type": "Number"
                }
              },
              "minio_service_interface": {
                "Options": {
                  "default": "30008",
                  "type": "Number"
                }
              },
              "mozart_es": {
                "Options": {
                  "default": "30013",
                  "type": "Number"
                }
              },
              "mozart_service": {
                "Options": {
                  "default": "30001",
                  "type": "Number"
                }
              }
            }
          }
        }
      }
    }
  }
]
